import requests
from bs4 import BeautifulSoup


headers = {
    "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
}

def fetch_jobs(url):
    jobs = []
    while True:
        response = requests.get(url, headers=headers)
        soup = BeautifulSoup(response.content, 'html.parser')

       
        job_listings = soup.find_all('div', class_='product-listing-hold')

        for job in job_listings:
            title = job.find('h3').text.strip()
            company = job.find('h5').text.strip()
            description = job.find('div', class_='product-listing__intro').text.strip()
            link = job.find('a', class_='product-listing__title')['href']

            jobs.append({
                'Company': company,
                'Title': title,
                'Description': description,
                'Link': link
            })

        
        next_page = soup.find('a', {'rel': 'next'})
        if next_page:
            url = next_page['href']
        else:
            break

    return jobs


skills = [
    "python",
    "typescript",
    "javascript",
    "rust"
]


all_jobs = {}
for skill in skills:
    url = f"https://berlinstartupjobs.com/skill-areas/{skill}/"
    all_jobs[skill] = fetch_jobs(url)


engineering_jobs = fetch_jobs("https://berlinstartupjobs.com/engineering/")
all_jobs['engineering'] = engineering_jobs


for skill, jobs in all_jobs.items():
    print(f"Skill/Area: {skill}, Total Jobs: {len(jobs)}")
    for job in jobs[:2]: 
        print(f"- {job['Title']} at {job['Company']} (Link: {job['Link']})")
    print("\n")
